{
    "contents" : "library(NlsyLinks)\n\n#########Data Management ##############\ncoding_speed <- read.delim(\"E:/Dropbox/Work/Research/Projects/NLSY/difference scores and health/year1project/coding_speed.csv\")\nraw1980intelligence <- read.delim(\"E:/Dropbox/Work/Research/Projects/NLSY/difference scores and health/year1project/raw1980intelligence.csv\")\n`H40` <- read.csv(\"E:/Dropbox/Work/Research/Projects/NLSY/difference scores and health/year1project/H40.csv\")\n`H50` <- read.csv(\"E:/Dropbox/Work/Research/Projects/NLSY/difference scores and health/year1project/H50.csv\")\nattach(raw1980intelligence)\nrawintelligence <- raw.word.arth.para...5.numer.\nrawintelligence[rawintelligence == -14] <- NA  \ndetach(raw1980intelligence)\nattach(coding_speed)\nrawcodingspeed <- ASVAB.8\nrawcodingspeed[rawcodingspeed == -4] <- NA  \ndetach(coding_speed)\nattach(H40)\nPCS_40<-H40.SF12_PCS_SCORE\nPCS_40[PCS_40 == -4] <- NA \ndetach(H40)\nattach(H50)\nPCS_50<-H50.SF12_PCS_SCORE\nPCS_50[PCS_50 == -4] <- NA \ndetach(H50)\n\n\n######Partialing Out Intelligence from Coding and Coding from Intelligence######\nm1 <- lm(rawintelligence ~ rawcodingspeed)\nm2 <- lm(rawcodingspeed ~ rawintelligence)\nIntercept_IcC<-(summary(m1)$coefficients[1])\nIntercept_CcI<-(summary(m2)$coefficients[1])\nBeta_IcC<-(summary(m1)$coefficients[2])\nBeta_CcI<-(summary(m2)$coefficients[2])\n###VARIABLE\nCodingcIntel <- rawcodingspeed-Intercept_CcI-Beta_CcI*rawintelligence\nIntelcCoding <- (rawintelligence-Intercept_IcC)-(Beta_IcC*rawcodingspeed)\n\nOverlapC <- Beta_CcI*rawintelligence\nOverlapI <- Beta_IcC*rawcodingspeed\n\ncor(OverlapC,OverlapI, use=\"pairwise.complete.obs\")\nattach(H40)\nBlood_Pressure <-H40.CHRC.1\nBlood_Pressure[Blood_Pressure == -4] <- NA\nDiabetes <-H40.CHRC.2\nDiabetes[Diabetes == -4] <- NA\nEyeTrouble<-H40.CHRC.10Q\nEyeTrouble[EyeTrouble == -4] <- NA\nSelfHealth<-H40.SF12.2\nSelfHealth[SelfHealth == -4] <- NA\n\nSelfHealth_Deary<-H40.SF12.2\nSelfHealth_Deary[SelfHealth_Deary == -4] <- NA\nSelfHealth_Deary[SelfHealth_Deary == 1] <- 0\nSelfHealth_Deary[SelfHealth_Deary == 2] <- 0\nSelfHealth_Deary[SelfHealth_Deary == 3] <- 0\nSelfHealth_Deary[SelfHealth_Deary == 4] <- 1\nSelfHealth_Deary[SelfHealth_Deary == 5] <- 1\ndetach(H40)\n##########DATAFRAMES\nraw.data<- data.frame(coding_speed,rawcodingspeed,rawintelligence)\ncontrolled.data<-data.frame(coding_speed,IntelcCoding,CodingcIntel)\ncombined.data<-data.frame(OverlapI,OverlapC,SelfHealth_Deary,SelfHealth,Diabetes,EyeTrouble,Blood_Pressure, coding_speed,IntelcCoding,CodingcIntel,rawcodingspeed,rawintelligence,PCS_40,PCS_50)\n##########DIFF Scores##########\nlibrary(NlsyLinks) #Load the package into the current R session.\ndsOutcomes <- combined.data\n#dsOutcomes$SubjectTag <- CreateSubjectTag(subjectID=dsOutcomes$SubjectID,\n#generation=dsOutcomes$Generation)\ndsLinks <- Links79Pair\ndsLinks <- dsLinks[dsLinks$RelationshipPath=='Gen1Housemates', ] #Only Gen1 Sibs (ie, NLSY79)\ndsDF <- CreatePairLinksDoubleEntered(outcomeDataset=dsOutcomes, linksPairDataset=dsLinks,\n                                     outcomeNames=c(\"OverlapI\",\"OverlapC\", \"SelfHealth_Deary\", \"SelfHealth\",\"EyeTrouble\",\"Blood_Pressure\",\"Diabetes\",\"rawintelligence\", \"rawcodingspeed\", \"CodingcIntel\", \"IntelcCoding\", \"PCS_40\", \"PCS_50\"))\nattach(dsDF)\ndiffBlood_Pressure<-(Blood_Pressure_S1-Blood_Pressure_S2)\n\ndiffOverlapI<-(OverlapI_S1-OverlapI_S2)\ndiffOverlapC<-(OverlapC_S1-OverlapC_S2)\ndiffOverlapAv<-(.5*(OverlapI_S1+OverlapC_S1)-.5*(OverlapI_S2+OverlapC_S2))\nmeanOverlapI<-(OverlapI_S1+OverlapI_S2)*.5\nmeanOverlapC<-(OverlapC_S1+OverlapC_S2)*.5\nmeanOverlapAv<-(.25*(OverlapI_S1+OverlapC_S1)+.25*(OverlapI_S2+OverlapC_S2))\n\n\ndiffSelfHealth_Deary<-(SelfHealth_Deary_S1-SelfHealth_Deary_S2)\ndiffSelfHealth<-(SelfHealth_S1-SelfHealth_S2)\ndiffEyeTrouble<-(EyeTrouble_S1-EyeTrouble_S2)\ndiffDiabetes<-Diabetes_S1-Diabetes_S2\nmeanSelfHealth<- SelfHealth_S1*.5 +.5*SelfHealth_S2\nrankdiffSelfHealth<-rank(-diffSelfHealth)\ns1geSelfHealth<-(diffSelfHealth)\n\ns1geSelfHealth[s1geSelfHealth >=0] <- 1\ns1geSelfHealth[s1geSelfHealth< 0] <- 0\n\n\ndiffPCS_40<- PCS_40_S1 - PCS_40_S2\n\ndiffPCS_50<- PCS_50_S1 - PCS_50_S2\ndiffrawcodingspeed<- rawcodingspeed_S1 - rawcodingspeed_S2\nrankdiffrawcodingspeed<-rank(-diffrawcodingspeed)\ndiffrawintelligence<- rawintelligence_S1 - rawintelligence_S2\nrankdiffrawintelligence<-rank(-diffrawintelligence)\ndiffCodingcIntel<- CodingcIntel_S1 - CodingcIntel_S2\nrankdiffCodingcIntel<-rank(-diffCodingcIntel)\ndiffIntelcCoding<- IntelcCoding_S1 - IntelcCoding_S2\nrankdiffIntelcCoding<-rank(-diffIntelcCoding)\nmeanrawcodingspeed<- rawcodingspeed_S1*.5 +.5*rawcodingspeed_S2\nmeanrawintelligence<- rawintelligence_S1*.5 +.5*rawintelligence_S2\nmeanCodingcIntel<- CodingcIntel_S1*.5 +.5*CodingcIntel_S2\nmeanIntelcCoding<- IntelcCoding_S1*.5 +.5*IntelcCoding_S2\ns1gerawcodingspeed <- diffrawcodingspeed\n\ns1gerawcodingspeed[s1gerawcodingspeed >=0] <- 1\ns1gerawcodingspeed[s1gerawcodingspeed < 0] <- 0\n\ns1gerawintelligence <- diffrawintelligence\ns1gerawintelligence[s1gerawintelligence >=0] <- 1\ns1gerawintelligence[s1gerawintelligence < 0] <- 0\ns1geCodingcIntel <- diffCodingcIntel\ns1geCodingcIntel[s1geCodingcIntel >=0] <- 1\ns1geCodingcIntel[s1geCodingcIntel < 0] <- 0\n\ns1geIntelcCoding <- diffIntelcCoding\ns1geIntelcCoding[s1geIntelcCoding >=0] <- 1\ns1geIntelcCoding[s1geIntelcCoding < 0] <- 0\n\n\nmegafull<- data.frame(diffOverlapI,diffOverlapC,diffOverlapAv,meanOverlapI,meanOverlapC,meanOverlapAv,dsDF,diffBlood_Pressure,rankdiffSelfHealth,meanSelfHealth, s1geSelfHealth,\n                      diffSelfHealth_Deary,\n                      diffSelfHealth,\n                      diffEyeTrouble,\n                      diffDiabetes,\n                      diffPCS_40,\n                      diffPCS_50,meanrawcodingspeed,meanrawintelligence,\n                      meanCodingcIntel,\n                      meanIntelcCoding, diffrawcodingspeed,diffrawintelligence,rankdiffrawcodingspeed,rankdiffrawintelligence,rankdiffCodingcIntel,\n                      diffCodingcIntel,diffIntelcCoding,s1gerawcodingspeed,rankdiffIntelcCoding,\n                      s1gerawintelligence,s1geCodingcIntel, s1geIntelcCoding)\n\ns1gerawintelligence_filtered<-megafull[megafull$s1gerawintelligence==1, ]\ns1gerawcodingspeed_filtered<-megafull[megafull$s1gerawcodingspeed==1, ]\ns1geCodingcIntel_filtered<-megafull[megafull$s1geCodingcIntel==1, ]\ns1geIntelcCoding_filtered<-megafull[megafull$s1geIntelcCoding==1, ]\ns1geSelfHealth_filtered<-megafull[megafull$s1geSelfHealth==1, ]\nwrite.csv(megafull, \"E:/Dropbox/Work/Research/Projects/NLSY/difference scores and health/year1project/megafull.csv\")\nwrite.csv(s1gerawintelligence_filtered, \"E:/Dropbox/Work/Research/Projects/NLSY/difference scores and health/year1project/s1gerawintelligence_filtered.csv\")\nwrite.csv(s1gerawcodingspeed_filtered, \"E:/Dropbox/Work/Research/Projects/NLSY/difference scores and health/year1project/s1gerawcodingspeed_filtered.csv\")\nwrite.csv(s1geCodingcIntel_filtered, \"E:/Dropbox/Work/Research/Projects/NLSY/difference scores and health/year1project/s1geCodingcIntel_filtered\")\nwrite.csv(s1geIntelcCoding_filtered, \"E:/Dropbox/Work/Research/Projects/NLSY/difference scores and health/year1project/s1geIntelcCoding_filtered\")\n\nwrite.csv(s1geSelfHealth_filtered, \"E:/Dropbox/Work/Research/Projects/NLSY/difference scores and health/year1project/s1geSelfHealth_filtered\")\n\n\ndetach(dsDF)\n",
    "created" : 1433431096653.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3213578523",
    "id" : "C15627FC",
    "lastKnownWriteTime" : 1417568192,
    "path" : "E:/Dropbox/Work/Research/Projects/NLSY/Not Current/difference scores and health/year1project/year1project.R",
    "project_path" : null,
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}