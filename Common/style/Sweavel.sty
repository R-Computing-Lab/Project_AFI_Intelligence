% Originally from Frank Harrell's group at 
% <http://biostat.mc.vanderbilt.edu/wiki/Main/SweaveTemplate>. 
% Some small modifications by Kieran Healy <http://kieranhealy.org>. 


% Replaces Sweave.sty
% Uses Listings package to allow for more flexible formatting of R
% output in Sweave documents (color backgrounds, etc)
% Usage: \usepackage{Sweavel}

% This version of Sweavel uses color names specified in the <svgnames>
% option to the latex xcolor package. See xcolor package
% documentation Section 4.3 "Colors via svgnames option" for names.

% To change size of R code and output, use e.g.: \def\Sweavesize{\normalsize}
% To change colors of R code, output, and commands, use e.g.:
% \def\Rcolor{\color{black}}
% \def\Routcolor{\color{green}}
% \def\Rcommentcolor{\color{red}}
% To change background color or R code and/or output, use e.g.:
% \def\Rbackground{\color{white}}
% \def\Routbackground{\color{white}}
% To use rgb specifications use \color[rgb]{ , , }
% To use gray scale use e.g. \color[gray]{0.5}
% If you change any of these after the first chunk is produced, the
% changes will have effect only for the next chunk.

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{Sweavel}{}  % substitute for Sweave.sty using
                             % listings package with relsize
							 
%%%%%%%%%%%% Packages %%%%%%%%%%%%
\RequirePackage{graphicx}
\RequirePackage[svgnames]{xcolor}
\RequirePackage{listings,fancyvrb,relsize,ae}
\RequirePackage[T1]{fontenc}
\IfFileExists{upquote.sty}{\RequirePackage{upquote}}{}

%%%%%%%%%%%% Style %%%%%%%%%%%%
\providecommand{\Sweavesize}{\smaller}

% Basic Color
\definecolor{Black}{rgb}{0,0,0}
\providecommand{\Rcolor}{\color{Black}}
\providecommand{\Routcolor}{\color{Black}}

% Keyword, comment etc
\definecolor{delimcolor}{rgb}{0.461,0.039,0.102}
\providecommand{\Rdelimcolor}{\color{delimcolor}}
\providecommand{\Rkeywordcolor}{\color{NavyBlue}}
\providecommand{\Rcommentcolor}{\color[rgb]{0.101, 0.043, 0.432}}

% Background Color
\providecommand{\Rbackground}{\color{WhiteSmoke}}
\providecommand{\Routbackground}{\color[gray]{0.55}}



\lstdefinestyle{Rstyle}{fancyvrb=false,escapechar=`,language=R,%
                        basicstyle={\Rcolor\Sweavesize\ttfamily},%
                        backgroundcolor={\Rbackground},%
                        showstringspaces=false,
                        breaklines=true,
						keywords={if, else, function, theFunction, tmp,for},
						keywordstyle={\Rkeywordcolor},
                        %alsoother={$},%
                       % alsoletter={.<-},%
                        otherkeywords={!,!=,~,$,*,\&,\%/\%,\%*\%,\%\%,<-,<<-,/},%
                        %escapeinside={(*}{*)},
					   keywordstyle={\Rkeywordcolor},
					   commentstyle={\Rcommentcolor\ttfamily\itshape}%,%
					   %moredelim=[s][\Rdelimcolor]{"}{"}
					   }
%
% Other options of interest:

\lstdefinestyle{Routstyle}{breaklines=true,
					fancyvrb=false,
					basicstyle={\Routcolor\Sweavesize\ttfamily},%
					backgroundcolor={\Routbackground}}

\newenvironment{Schunk}{}{}
\lstnewenvironment{Sinput}{\lstset{style=Rstyle}}{}
\lstnewenvironment{Scode}{\lstset{style=Rstyle}}{}
\lstnewenvironment{Soutput}{\lstset{style=Routstyle}}{}
\lstnewenvironment{Sinputsmall}{%
 \lstset{style=Rstyle,basicstyle={\Rcolor}\small}}}{}
\lstnewenvironment{Sinputsmaller}{%
 \lstset{style=Rstyle,basicstyle={\Rcolor}\smaller}}}{}

\endinput
